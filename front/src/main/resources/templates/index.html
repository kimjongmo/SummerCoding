<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <title>Popup Demo</title>
    <link href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.0/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.0/js/bootstrap.min.js"></script>
    <!--<script src="//code.jquery.com/jquery-1.11.1.min.js"></script>-->
</head>
<style>
    .badgebox {
        opacity: 0;
    }

    .badgebox + .badge {
        /* Move the check mark away when unchecked */
        text-indent: -999999px;
        /* Makes the badge's width stay the same checked and unchecked */
        width: 27px;
    }

    .badgebox:focus + .badge {
        /* Set something to make the badge looks focused */
        /* This really depends on the application, in my case it was: */

        /* Adding a light border */
        box-shadow: inset 0px 0px 5px;
        /* Taking the difference out of the padding */
    }

    .badgebox:checked + .badge {
        /* Move the check mark back when checked */
        text-indent: 0;
    }

    .table > tbody > tr > th {
        text-align: center;
        vertical-align: middle;
    }
    .table > thead > tr > th {
        text-align: center;
    }

    .checked {
        color: orange;
    }

    .btn-glyphicon {
        padding: 8px;
        background: #ffffff;
        margin-right: 4px;
    }

    .icon-btn {
        padding: 1px 15px 3px 2px;
        border-radius: 50px;
    }
</style>
<body>
<div class="container">
    <div style="text-align: center;">
        <h1>To Do List</h1>
        <a class="btn icon-btn btn-success" data-target="#layerpop" data-toggle="modal">
            <span class="glyphicon btn-glyphicon glyphicon-plus img-circle text-success"></span>Add</a>
    </div>
    <hr>
    <!-- ADD Layer Popup -->
    <div class="modal fade" id="layerpop">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" onclick="resetForm('add-pop')">×</button>
                    <h4 class="modal-title">일정 추가</h4>
                </div>
                <div class="modal-body">
                    <form id="add-pop">
                        <div class="form-group">
                            <label for="title">제목</label>
                            <input type="text" class="form-control" id="title" aria-describedby="emailHelp"
                                   placeholder="제목을 입력해주세요." max="100" required>
                        </div>
                        <div class="form-group">
                            <label for="content">내용</label>
                            <textarea class="form-control" id="content" name="password"
                                      placeholder="내용을 입력해주세요." maxlength="500" required></textarea>
                        </div>
                        <hr>
                        <div class="form-group">
                            <label for="deadline">마감 일자(Optional)</label>
                            <input type="datetime-local" class="form-control" value="" id="deadline">
                        </div>
                        <div class="modal-footer">
                            <a onclick="crud.insert()" id="submit" class="btn btn-success"><span class="glyphicon glyphicon-plus-sign"></span>
                                추가</a>
                        </div>
                    </form>
                </div>
                <!-- Footer -->
            </div>
        </div>
    </div>

    <!-- Edit Layer Popup -->
    <div class="modal fade" id="edit-layer-pop">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" onclick="resetForm('edit_pop')">×</button>
                    <h4 class="modal-title">일정 수정</h4>
                </div>
                <div class="modal-body">
                    <form id="edit_pop">
                        <input type="hidden" id="edit_id" value="">
                        <div class="form-group">
                            <label for="title">제목</label>
                            <input type="text" class="form-control" id="edit_title" aria-describedby="emailHelp"
                                   placeholder="제목을 입력해주세요." max="100" required>
                        </div>
                        <div class="form-group">
                            <label for="content">내용</label>
                            <textarea class="form-control" id="edit_content" name="password"
                                      placeholder="내용을 입력해주세요." maxlength="500" required></textarea>
                        </div>
                        <hr>
                        <div class="form-group">
                            <label for="deadline">마감 일자(Optional)</label>
                            <input type="datetime-local" class="form-control" value="" id="edit_deadline">
                        </div>
                        <div class="modal-footer">
                            <a id="edit_submit" class="btn btn-success" onclick="crud.update()">
                                <span class="glyphicon glyphicon-plus-sign"></span>수정</a>
                        </div>
                    </form>
                </div>
                <!-- Footer -->
            </div>
        </div>
    </div>
    <!-- 5,제목,내용,~~~-->

    <table class="table table-striped table-light vertical-align" style="font-family: Arial;">
        <thead>
        <tr>
            <th>제목</th>
            <th>내용</th>
            <th>마감 기간</th>
            <th>상태</th>
            <th>수정</th>
            <th>삭제</th>
        </tr>
        </thead>
        <tbody>
        <tr th:if="${todos.getTodos()==null}">
            <th colspan="6" style="text-align: center">일정이 없습니다.</th>
        </tr>
        <tr th:unless="${todos.getTodos()==null}" th:each="todo : ${todos.getTodos()}">
            <!-- 제목 -->
            <th th:text="${todo.title}"></th>

            <!-- 내용 -->
            <th th:text="${todo.content}"></th>

            <!-- 마감 기간-->
            <th th:text="${todo.deadline}"></th>

            <!-- 상태 -->
            <div th:if="${todo.status.equals('대기중')}">
                <th>
                    <a th:onclick="'crud.finish('+${todo.getId()}+');'" class="btn btn-xs icon-btn btn-success"><span
                            class="glyphicon btn-glyphicon glyphicon-ok img-circle text-success"></span>대기중</a>
                </th>
                <th>
                    <a th:onclick="'crud.get('+${todo.getId()}+');'" class="btn btn-xs icon-btn btn-primary" ><span
                            class="glyphicon btn-glyphicon glyphicon-pencil img-circle text-primary"></span>수정</a>
                </th>
            </div>
            <div th:unless="${todo.status.equals('대기중')}">
                <th>
                    <a class="btn btn-xs icon-btn btn-success" disabled="true"><span
                            class="glyphicon btn-glyphicon glyphicon-ok img-circle text-success"></span>완료</a>
                </th>
                <th>
                    <a class="btn btn-xs icon-btn btn-primary" disabled="true"><span
                            class="glyphicon btn-glyphicon glyphicon-pencil img-circle text-primary"></span>수정</a>
                </th>
            </div>
            <!-- 수정 -->
            <!-- 삭제 -->
            <th>
                <a th:onclick="'crud.delete('+${todo.getId()}+');'"class="btn btn-xs icon-btn btn-danger"><span
                        class="glyphicon btn-glyphicon glyphicon-trash img-circle text-danger"></span>삭제</a>
            </th>
            </th>
        </tr>
        </tbody>
    </table>

</div>


<script type="text/javascript">
    function resetForm(form) {
        $("#"+form)[0].reset();
    }
</script>
<script src="/js/crud.js"></script>
</body>
</html>